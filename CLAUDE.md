# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## What This Repository Is

This is a **product development starter kit** - a template repository you clone when starting a new product from scratch. It guides you through the entire journey from raw idea to autonomous development loops.

## Workflow Overview

```
/project:start     →  Initialize project structure
       ↓
  Write idea in project/docs/idea.md
       ↓
/project:pm        →  Agent 1: Raw idea → PRD (asks clarifying questions)
       ↓
/project:architect →  Agent 2: PRD → Technical Spec (asks about tech choices)
       ↓
/project:scaffold  →  Generate minimal code structure
       ↓
/project:loop      →  Agent 3: Set up autonomous dev loop with HITL transition
```

## Key Principles

### Language Handling
- User may write in Norwegian
- ALL generated documents (PRD, specs, code comments) must be in English
- Agents should translate user input seamlessly

### Human-in-the-Loop (HITL)
- Early iterations require user approval
- Agents must provide "Review Guides" - tell user what to look for
- Gradual transition to autonomous operation

### Memory System
The `project/memory/` directory contains JSONL files that persist learnings:
- `decisions.jsonl` - Architecture decisions with reasoning
- `errors.jsonl` - Errors encountered and how they were fixed
- `discoveries.jsonl` - Important insights for future iterations

Each loop iteration MUST read these files before acting.

### Completion Signals
Agents emit promise tags to signal completion:
- `<promise>PROJECT_INITIALIZED</promise>`
- `<promise>PRD_COMPLETE</promise>`
- `<promise>TECHNICAL_SPEC_COMPLETE</promise>`
- `<promise>SCAFFOLD_COMPLETE</promise>`
- `<promise>LOOP_CONFIGURED</promise>`

## Directory Structure

```
idea-to-product/
├── CLAUDE.md                    # This file
├── README.md                    # User-facing documentation
├── .claude/commands/            # Slash commands
│   ├── start.md                 # Initialize project
│   ├── pm.md                    # Product Manager agent
│   ├── architect.md             # Technical Architect agent
│   ├── scaffold.md              # Code scaffolding
│   └── loop.md                  # Loop setup agent
├── templates/                   # Templates for generated content
│   ├── prd.md
│   ├── technical-spec.md
│   └── scaffolds/               # Code scaffolding templates
│       ├── typescript/
│       └── python/
└── project/                     # Generated by /project:start
    ├── docs/
    │   ├── idea.md              # User's raw idea
    │   ├── prd.md               # Generated PRD
    │   └── technical-spec.md    # Generated tech spec
    ├── memory/
    │   ├── decisions.jsonl
    │   ├── errors.jsonl
    │   └── discoveries.jsonl
    └── src/                     # Scaffolded code
```

## Agent Behavior Guidelines

### All Agents Must:
1. Read relevant memory files before making decisions
2. Log important decisions/discoveries to memory
3. Provide a Review Guide before requesting approval
4. Use `ask()` for critical decisions - never guess
5. Output completion promise when done

### HITL Transition Pattern
```
Iteration 1-2: Full HITL (approve every change)
Iteration 3-4: Partial HITL (review highlights only)
Iteration 5+:  Autonomous (runs until completion or max iterations)
```

## Scaffolding

Scaffolds are MINIMAL - just enough structure to start coding:
- Package manager config (package.json / pyproject.toml)
- Language config (tsconfig.json / etc.)
- Folder structure (src/, tests/, etc.)
- Basic .gitignore

NO boilerplate code is generated - just the skeleton.
